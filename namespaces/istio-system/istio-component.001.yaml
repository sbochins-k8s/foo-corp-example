---
apiVersion: v1
kind: ConfigMap
metadata:
  name: istio-galley-configuration
  namespace: istio-system
  labels:
    app: galley
    chart: galley
    heritage: Tiller
    release: istio
    istio: galley
data:
  validatingwebhookconfiguration.yaml: "apiVersion: admissionregistration.k8s.io/v1beta1\n\
    kind: ValidatingWebhookConfiguration\nmetadata:\n  name: istio-galley\n  namespace:\
    \ istio-system\n  labels:\n    app: galley\n    chart: galley\n    heritage: Tiller\n\
    \    release: istio\n    istio: galley\nwebhooks:\n  - name: pilot.validation.istio.io\n\
    \    clientConfig:\n      service:\n        name: istio-galley\n        namespace:\
    \ istio-system\n        path: \"/admitpilot\"\n      caBundle: \"\"\n    rules:\n\
    \      - operations:\n        - CREATE\n        - UPDATE\n        apiGroups:\n\
    \        - config.istio.io\n        apiVersions:\n        - v1alpha2\n       \
    \ resources:\n        - httpapispecs\n        - httpapispecbindings\n        -\
    \ quotaspecs\n        - quotaspecbindings\n      - operations:\n        - CREATE\n\
    \        - UPDATE\n        apiGroups:\n        - rbac.istio.io\n        apiVersions:\n\
    \        - \"*\"\n        resources:\n        - \"*\"\n      - operations:\n \
    \       - CREATE\n        - UPDATE\n        apiGroups:\n        - authentication.istio.io\n\
    \        apiVersions:\n        - \"*\"\n        resources:\n        - \"*\"\n\
    \      - operations:\n        - CREATE\n        - UPDATE\n        apiGroups:\n\
    \        - networking.istio.io\n        apiVersions:\n        - \"*\"\n      \
    \  resources:\n        - destinationrules\n        - envoyfilters\n        - gateways\n\
    \        - serviceentries\n        - sidecars\n        - virtualservices\n   \
    \ failurePolicy: Fail\n  - name: mixer.validation.istio.io\n    clientConfig:\n\
    \      service:\n        name: istio-galley\n        namespace: istio-system\n\
    \        path: \"/admitmixer\"\n      caBundle: \"\"\n    rules:\n      - operations:\n\
    \        - CREATE\n        - UPDATE\n        apiGroups:\n        - config.istio.io\n\
    \        apiVersions:\n        - v1alpha2\n        resources:\n        - rules\n\
    \        - attributemanifests\n        - circonuses\n        - deniers\n     \
    \   - fluentds\n        - kubernetesenvs\n        - listcheckers\n        - memquotas\n\
    \        - noops\n        - opas\n        - prometheuses\n        - rbacs\n  \
    \      - solarwindses\n        - stackdrivers\n        - cloudwatches\n      \
    \  - dogstatsds\n        - statsds\n        - stdios\n        - apikeys\n    \
    \    - authorizations\n        - checknothings\n        # - kuberneteses\n   \
    \     - listentries\n        - logentries\n        - metrics\n        - quotas\n\
    \        - reportnothings\n        - tracespans\n    failurePolicy: Fail"
